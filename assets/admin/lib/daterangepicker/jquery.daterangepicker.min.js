/*! FUNimation 2014-10-02 17:22:27 */
!function(a){return a.dateRangePickerLanguages={cn:{selected:"已选择:",day:"天",days:"天",apply:"确定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortcuts:"快捷选择",past:"过去",following:"将来",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"上周","prev-month":"上个月","prev-year":"去年",next:"&nbsp;&nbsp;&nbsp;","next-week":"下周","next-month":"下个月","next-year":"明年","less-than":"所选日期范围不能大于%d天","more-than":"所选日期范围不能小于%d天","default-more":"请选择大于%d天的日期范围","default-less":"请选择小于%d天的日期范围","default-range":"请选择%d天到%d天的日期范围","default-single":"请选择一个日期","default-default":"请选择一个日期范围"},en:{selected:"Selected:",day:"Day",days:"Days",apply:"Close","week-1":"MO","week-2":"TU","week-3":"WE","week-4":"TH","week-5":"FR","week-6":"SA","week-7":"SU","month-name":["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],shortcuts:"Shortcuts",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range"}},void 0===window.moment?void(window.console&&console.warn):void(a.fn.dateRangePicker=function(b){function c(){var c=this;if(a(this).data("date-picker-opened"))return void x();a(this).data("date-picker-opened",!0),K=D().hide(),a(b.container).append(K),b.inline?K.css({position:"static"}):d(),b.alwaysOpen&&K.find(".apply-btn").hide();var e=new Date;b.startDate&&y(e,b.startDate)<0&&(e=moment(b.startDate).toDate()),b.endDate&&y(A(e),b.endDate)>0&&(e=B(moment(b.endDate).toDate())),s(e,"month1"),s(A(e),"month2"),b.time.enabled&&(b.startDate&&b.endDate||b.start&&b.end?(t(moment(b.start||b.startDate).toDate(),"time1"),t(moment(b.end||b.endDate).toDate(),"time2")):(t(e,"time1"),t(e,"time2")));var f="";f=J(b.singleDate?"default-single":b.minDays&&b.maxDays?"default-range":b.minDays?"default-more":b.maxDays?"default-less":"default-default"),K.find(".default-top").html(f.replace(/\%d/,b.minDays).replace(/\%d/,b.maxDays)),setTimeout(function(){M=!0},0),K.click(function(a){a.stopPropagation()}),a(document).bind("click.datepicker",x),K.find(".next").click(function(){var c=a(this).parents("table").hasClass("month2"),d=c?b.month2:b.month1;d=A(d),!b.singleDate&&!c&&y(d,b.month2)>=0||(s(d,c?"month2":"month1"),w())}),K.find(".prev").click(function(){var c=a(this).parents("table").hasClass("month2"),d=c?b.month2:b.month1;d=B(d),c&&y(d,b.month1)<=0||(s(d,c?"month2":"month1"),w())}),K.bind("click",function(b){a(b.target).hasClass("day")&&m(a(b.target))}),K.attr("unselectable","on").css("user-select","none").bind("selectstart",function(a){return a.preventDefault(),!1}),K.find(".apply-btn").click(function(){x();var d=v(new Date(b.start))+b.separator+v(new Date(b.end));a(c).trigger("datepicker-apply",{value:d,date1:new Date(b.start),date2:new Date(b.end)})}),K.find("[shortcut]").click(function(){var c=a(this).attr("shortcut"),d=new Date,e=!1;if(-1!=c.indexOf("day")){var f=parseInt(c.split(",",2)[1],10);e=new Date((new Date).getTime()+864e5*f),d=new Date(d.getTime()+864e5*(f>0?1:-1))}else if(-1!=c.indexOf("week")){var g=-1!=c.indexOf("prev,")?-1:1;if(1==g)var h="monday"==b.startOfWeek?1:0;else var h="monday"==b.startOfWeek?0:6;for(d=new Date(d.getTime()-864e5);d.getDay()!=h;)d=new Date(d.getTime()+864e5*g);e=new Date(d.getTime()+864e5*g*6)}else if(-1!=c.indexOf("month")){var g=-1!=c.indexOf("prev,")?-1:1;e=1==g?A(d):B(d),e.setDate(1),d=A(e),d.setDate(1),d=new Date(d.getTime()-864e5)}else if(-1!=c.indexOf("year")){var g=-1!=c.indexOf("prev,")?-1:1;e=new Date,e.setFullYear(d.getFullYear()+g),e.setMonth(0),e.setDate(1),d.setFullYear(d.getFullYear()+g),d.setMonth(11),d.setDate(31)}else if("custom"==c){var i=a(this).html();if(b.customShortcuts&&b.customShortcuts.length>0)for(var j=0;j<b.customShortcuts.length;j++){var k=b.customShortcuts[j];if(k.name==i){var l=[];l=k.dates.call(),l&&2==l.length&&(e=l[0],d=l[1]),l&&1==l.length&&(movetodate=l[0],s(movetodate,"month1"),s(A(movetodate),"month2"),w());break}}}e&&d&&(q(e,d),o())}),K.find(".time1 input[type=range]").bind("change mousemove",function(b){var c=b.target,d="hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,e="minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0;i("time1",d,e)}),K.find(".time2 input[type=range]").bind("change mousemove",function(b){var c=b.target,d="hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,e="minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0;i("time2",d,e)})}function d(){if(!b.inline){var c=a(N).offset();K.css(c.left<460?{top:c.top+a(N).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:c.left}:{top:c.top+a(N).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:c.left+a(N).width()-K.width()-16})}}function e(a){d();var c=b.getValue.call(O),e=c?c.split(b.separator):"";if(e&&e.length>=2){var f=b.format;f.match(/Do/)&&(f=f.replace(/Do/,"D"),e[0]=e[0].replace(/(\d+)(th|nd|st)/,"$1"),e[1]=e[1].replace(/(\d+)(th|nd|st)/,"$1")),M=!1,q(moment(e[0],f).toDate(),moment(e[1],f).toDate()),M=!0}K.slideDown(a)}function f(a,b){K.find("."+a+" input[type=range].hour-range").val(moment(b).hours()),K.find("."+a+" input[type=range].minute-range").val(moment(b).minutes()),i(a,moment(b).format("HH"),moment(b).format("mm"))}function g(a,c){b[a]=parseInt(moment(parseInt(c)).startOf("day").add("h",moment(b[a+"Time"]).format("HH")).add("m",moment(b[a+"Time"]).format("mm")).valueOf())}function h(){f("time1",b.start),f("time2",b.end)}function i(a,c,d){function e(a,e){var f=e.format("HH"),g=e.format("mm");b[a]=e.startOf("day").add("h",c||f).add("m",d||g).valueOf()}switch(c&&K.find("."+a+" .hour-val").text(c),d&&K.find("."+a+" .minute-val").text(d),a){case"time1":b.start&&e("start",moment(b.start)),e("startTime",moment(b.startTime||moment().valueOf()));break;case"time2":b.end&&e("end",moment(b.end)),e("endTime",moment(b.endTime||moment().valueOf()))}o(),p(),r()}function j(){b.start=!1,b.end=!1,K.find(".day.checked").removeClass("checked"),b.setValue.call(O,""),o(),p(),r()}function k(a){var c=a;return"week-range"===b.batchMode?c="monday"===b.startOfWeek?moment(parseInt(a)).startOf("isoweek").valueOf():moment(parseInt(a)).startOf("week").valueOf():"month-range"===b.batchMode&&(c=moment(parseInt(a)).startOf("month").valueOf()),c}function l(a){var c=a;return"week-range"===b.batchMode?c="monday-range"===b.startOfWeek?moment(parseInt(a)).endOf("isoweek").valueOf():moment(parseInt(a)).endOf("week").valueOf():"month"===b.batchMode&&(c=moment(parseInt(a)).endOf("month").valueOf()),c}function m(a){if(!a.hasClass("invalid")){var c=a.attr("time");if(a.addClass("checked"),b.singleDate?(b.start=c,b.end=!1,b.time.enabled&&g("start",b.start)):"week"===b.batchMode?"monday"===b.startOfWeek?(b.start=moment(parseInt(c)).startOf("isoweek").valueOf(),b.end=moment(parseInt(c)).endOf("isoweek").valueOf()):(b.end=moment(parseInt(c)).endOf("week").valueOf(),b.start=moment(parseInt(c)).startOf("week").valueOf()):"month"===b.batchMode?(b.start=moment(parseInt(c)).startOf("month").valueOf(),b.end=moment(parseInt(c)).endOf("month").valueOf()):b.start&&b.end||!b.start&&!b.end?(b.start=k(c),b.end=!1,b.time.enabled&&g("start",b.start)):b.start&&(b.end=l(c),b.time.enabled&&g("end",b.end)),!b.singleDate&&b.start&&b.end&&b.start>b.end){var d=b.end;b.end=l(b.start),b.start=k(d),b.time.enabled&&h()}b.start=parseInt(b.start),b.end=parseInt(b.end),o(),p(),r(),n()}}function n(){b.singleDate===!0?M&&b.start&&b.autoClose&&x():M&&b.start&&b.end&&b.autoClose&&x()}function o(){var a=Math.ceil((b.end-b.start)/864e5)+1;b.singleDate?b.start&&!b.end?K.find(".drp_top-bar").removeClass("error").addClass("normal"):K.find(".drp_top-bar").removeClass("error").removeClass("normal"):b.maxDays&&a>b.maxDays?(b.start=!1,b.end=!1,K.find(".day").removeClass("checked"),K.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(J("less-than").replace("%d",b.maxDays))):b.minDays&&a<b.minDays?(b.start=!1,b.end=!1,K.find(".day").removeClass("checked"),K.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(J("more-than").replace("%d",b.minDays))):b.start||b.end?K.find(".drp_top-bar").removeClass("error").addClass("normal"):K.find(".drp_top-bar").removeClass("error").removeClass("normal"),b.singleDate&&b.start&&!b.end||!b.singleDate&&b.start&&b.end?K.find(".apply-btn").removeClass("disabled"):K.find(".apply-btn").addClass("disabled"),b.batchMode&&(b.start&&b.startDate&&z(b.start,b.startDate)<0||b.end&&b.endDate&&z(b.end,b.endDate)>0)&&(b.start=!1,b.end=!1,K.find(".day").removeClass("checked"))}function p(){if(K.find(".start-day").html("..."),K.find(".end-day").html("..."),K.find(".selected-days").hide(),b.start&&K.find(".start-day").html(v(new Date(parseInt(b.start)))),b.end&&K.find(".end-day").html(v(new Date(parseInt(b.end)))),b.start&&b.singleDate){K.find(".apply-btn").removeClass("disabled");var c=v(new Date(b.start));b.setValue.call(O,c,v(new Date(b.start)),v(new Date(b.end))),M&&a(N).trigger("datepicker-change",{value:c,date1:new Date(b.start)})}else if(b.start&&b.end){K.find(".selected-days").show().find(".selected-days-num").html(Math.round((b.end-b.start)/864e5)+1),K.find(".apply-btn").removeClass("disabled");var c=v(new Date(b.start))+b.separator+v(new Date(b.end));b.setValue.call(O,c,v(new Date(b.start)),v(new Date(b.end))),M&&a(N).trigger("datepicker-change",{value:c,date1:new Date(b.start),date2:new Date(b.end)})}else K.find(".apply-btn").addClass("disabled")}function q(a,c){if(a.getTime()>c.getTime()){var d=c;c=a,a=d,d=null}var e=!0;return b.startDate&&z(a,b.startDate)<0&&(e=!1),b.endDate&&z(c,b.endDate)>0&&(e=!1),e?(b.start=a.getTime(),b.end=c.getTime(),0==y(a,c)&&(c=A(a)),b.time.enabled&&(f("time1",a),f("time2",c)),s(a,"month1"),s(c,"month2"),w(),p(),void n()):(s(b.startDate,"month1"),s(A(b.startDate),"month2"),void w())}function r(){(b.start||b.end)&&K.find(".day").each(function(){var c=parseInt(a(this).attr("time")),d=b.start,e=b.end;b.time.enabled&&(c=moment(c).startOf("day").valueOf(),d=moment(d||moment().valueOf()).startOf("day").valueOf(),e=moment(e||moment().valueOf()).startOf("day").valueOf()),b.start&&b.end&&e>=c&&c>=d||b.start&&!b.end&&moment(d).format("YYYY-MM-DD")==moment(c).format("YYYY-MM-DD")?a(this).addClass("checked"):a(this).removeClass("checked")})}function s(a,c){a=moment(a).toDate();var d=u(a.getMonth());K.find("."+c+" .month-name").html(d+" "+a.getFullYear()),K.find("."+c+" tbody").html(H(a)),b[c]=a}function t(a,b){K.find("."+b).append(C()),f(b,a)}function u(a){return J("month-name")[a]}function v(a){return moment(a).format(b.format)}function w(){r();var a=parseInt(moment(b.month1).format("YYYYMM")),c=parseInt(moment(b.month2).format("YYYYMM")),d=Math.abs(a-c),e=d>1&&89!=d;e?K.find(".gap").show():K.find(".gap").hide()}function x(){b.alwaysOpen||(a(K).slideUp(200,function(){a(N).data("date-picker-opened",!1)}),a(N).trigger("datepicker-close"))}function y(a,b){var c=parseInt(moment(a).format("YYYYMM"))-parseInt(moment(b).format("YYYYMM"));return c>0?1:0==c?0:-1}function z(a,b){var c=parseInt(moment(a).format("YYYYMMDD"))-parseInt(moment(b).format("YYYYMMDD"));return c>0?1:0==c?0:-1}function A(a){a=moment(a).toDate();for(var b=a.getMonth();a.getMonth()==b;)a=new Date(a.getTime()+864e5);return a}function B(a){a=moment(a).toDate();for(var b=a.getMonth();a.getMonth()==b;)a=new Date(a.getTime()-864e5);return a}function C(){var a='<div><span>Time: <span class="hour-val">00</span>:<span class="minute-val">00</span></span></div><div class="hour"><label>Hour: <input type="range" class="hour-range" name="hour" min="0" max="23"></label></div><div class="minute"><label>Minute: <input type="range" class="minute-range" name="minute" min="0" max="59"></label></div>';return a}function D(){var c='<div class="date-picker-wrapper';if(b.singleDate&&(c+=" single-date"),b.showShortcuts||(c+=" no-shortcuts "),c+='"><div class="drp_top-bar">					<div class="normal-top">						<span style="color:#333">'+J("selected")+' </span> <b class="start-day">...</b>',b.singleDate||(c+=' <span class="separator-day">'+b.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+J("days")+")</i>"),c+='</div>					<div class="error-top">error</div>					<div class="default-top">default</div>					<input type="button" class="apply-btn disabled '+E()+'" value="'+J("apply")+'" />				</div><div class="month-wrapper"><table class="month1" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;"><span class="prev">&lt;</span></th><th colspan="5" class="month-name">January, 2011</th><th style="width:27px;"><span class="next">&gt;</span></th></tr><tr class="week-name">'+F()+"</thead><tbody></tbody></table>",b.singleDate||(c+='<div class="gap">'+G()+'</div><table class="month2" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;"><span class="prev">&lt;</span></th><th colspan="5" class="month-name">January, 2011</th><th style="width:27px;"><span class="next">&gt;</span></th></tr><tr class="week-name">'+F()+"</thead><tbody></tbody></table>"),c+='<div style="clear:both;height:0;font-size:0;"></div><div class="time"><div class="time1"></div>',b.singleDate||(c+='<div class="time2"></div>'),c+='</div><div style="clear:both;height:0;font-size:0;"></div></div>',b.showShortcuts){c+='<div class="footer"><b>'+J("shortcuts")+"</b>";var d=b.shortcuts;if(d){if(d["prev-days"]&&d["prev-days"].length>0){c+='&nbsp;<span class="prev-days">'+J("past");for(var e=0;e<d["prev-days"].length;e++){var f=d["prev-days"][e];f+=J(d["prev-days"][e]>1?"days":"day"),c+=' <a href="javascript:;" shortcut="day,-'+d["prev-days"][e]+'">'+f+"</a>"}c+="</span>"}if(d["next-days"]&&d["next-days"].length>0){c+='&nbsp;<span class="next-days">'+J("following");for(var e=0;e<d["next-days"].length;e++){var f=d["next-days"][e];f+=J(d["next-days"][e]>1?"days":"day"),c+=' <a href="javascript:;" shortcut="day,'+d["next-days"][e]+'">'+f+"</a>"}c+="</span>"}if(d.prev&&d.prev.length>0){c+='&nbsp;<span class="prev-buttons">'+J("previous");for(var e=0;e<d.prev.length;e++){var f=J("prev-"+d.prev[e]);c+=' <a href="javascript:;" shortcut="prev,'+d.prev[e]+'">'+f+"</a>"}c+="</span>"}if(d.next&&d.next.length>0){c+='&nbsp;<span class="next-buttons">'+J("next");for(var e=0;e<d.next.length;e++){var f=J("next-"+d.next[e]);c+=' <a href="javascript:;" shortcut="next,'+d.next[e]+'">'+f+"</a>"}c+="</span>"}}if(b.customShortcuts)for(var e=0;e<b.customShortcuts.length;e++){var g=b.customShortcuts[e];c+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+g.name+"</a></span>"}c+="</div>"}return c+="</div>",a(c)}function E(){return b.autoClose===!0?"hide":""}function F(){return"monday"==b.startOfWeek?"<th>"+J("week-1")+"</th>					<th>"+J("week-2")+"</th>					<th>"+J("week-3")+"</th>					<th>"+J("week-4")+"</th>					<th>"+J("week-5")+"</th>					<th>"+J("week-6")+"</th>					<th>"+J("week-7")+"</th>":"<th>"+J("week-7")+"</th>					<th>"+J("week-1")+"</th>					<th>"+J("week-2")+"</th>					<th>"+J("week-3")+"</th>					<th>"+J("week-4")+"</th>					<th>"+J("week-5")+"</th>					<th>"+J("week-6")+"</th>"}function G(){for(var a=['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'],b=0;20>b;b++)a.push('<div class="gap-line">					<div class="gap-1"></div>					<div class="gap-2"></div>					<div class="gap-3"></div>				</div>');return a.push("</div>"),a.join("")}function H(a){var c=[];a.setDate(1);var d=(new Date(a.getTime()-864e5),new Date),e=a.getDay();if(0==e&&"monday"==b.startOfWeek&&(e=7),e>0)for(var f=e;f>0;f--){var g=new Date(a.getTime()-864e5*f),h=!0;b.startDate&&z(g,b.startDate)<0&&(h=!1),b.endDate&&z(g,b.endDate)>0&&(h=!1),c.push({type:"lastMonth",day:g.getDate(),time:g.getTime(),valid:h})}for(var i=a.getMonth(),f=0;40>f;f++){var j=moment(a).add("days",f).toDate(),h=!0;b.startDate&&z(j,b.startDate)<0&&(h=!1),b.endDate&&z(j,b.endDate)>0&&(h=!1),c.push({type:j.getMonth()==i?"toMonth":"nextMonth",day:j.getDate(),time:j.getTime(),valid:h})}for(var k=[],l=0;6>l&&"nextMonth"!=c[7*l].type;l++){k.push("<tr>");for(var g=0;7>g;g++){var m="monday"==b.startOfWeek?g+1:g,j=c[7*l+m],n=moment(j.time).format("L")==moment(d).format("L");if(j.extraClass="",j.tooltip="",b.beforeShowDay&&"function"==typeof b.beforeShowDay){var o=b.beforeShowDay(moment(j.time).toDate());j.valid=o[0],j.extraClass=o[1]||"",j.tooltip=o[2]||"",""!=j.tooltip&&(j.extraClass+=" has-tooltip ")}k.push('<td><div time="'+j.time+'" title="'+j.tooltip+'" class="day '+j.type+" "+j.extraClass+" "+(j.valid?"valid":"invalid")+" "+(n?"real-today":"")+'">'+j.day+"</div></td>")}k.push("</tr>")}return k.join("")}function I(){if("auto"==b.language){var c=navigator.language?navigator.language:navigator.browserLanguage;if(!c)return a.dateRangePickerLanguages.en;var c=c.toLowerCase();for(var d in a.dateRangePickerLanguages)if(-1!=c.indexOf(d))return a.dateRangePickerLanguages[d];return a.dateRangePickerLanguages.en}return b.language&&b.language in a.dateRangePickerLanguages?a.dateRangePickerLanguages[b.language]:a.dateRangePickerLanguages.en}function J(a){return a in L?L[a]:a}b||(b={}),b=a.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return a(this).val()},setValue:function(b){a(this).val(b)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!0,shortcuts:{"next-days":[3,5,7],next:["week","month","year"]},customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,batchMode:!1},b),b.start=!1,b.end=!1,b.startDate&&"string"==typeof b.startDate&&(b.startDate=moment(b.startDate,b.format).toDate()),b.endDate&&"string"==typeof b.endDate&&(b.endDate=moment(b.endDate,b.format).toDate());var K,L=I(),M=!1,N=this,O=a(N).get(0);return a(this).unbind(".datepicker").bind("click.datepicker",function(a){a.stopPropagation(),e(200)}),c.call(this),b.alwaysOpen&&e(0),a(this).data("dateRangePicker",{setDateRange:function(a,c){"string"==typeof a&&"string"==typeof c&&(a=moment(a,b.format).toDate(),c=moment(c,b.format).toDate()),q(a,c)},clear:j,close:x,open:e,destroy:function(){a(N).unbind(".datepicker"),a(N).data("dateRangePicker",""),K.remove(),a(window).unbind("resize.datepicker",d),a(document).unbind("click.datepicker",x)}}),a(window).bind("resize.datepicker",d),this})}(jQuery);